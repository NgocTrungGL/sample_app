<% provide(:title, @title) %>

<div class="container py-4">
  <div class="row">
    <!-- Cột trái: thông tin người dùng -->
    <aside class="col-md-4 mb-4">
      <section class="card shadow border-0">
        <div class="card-header bg-primary text-white text-center fw-bold">
          <%= @title %>
        </div>
        <div class="card-body text-center">
          <%= gravatar_for @user, size: 120, class: "rounded-circle border border-3 border-primary mb-3" %>
          <h4 class="fw-bold text-dark mb-2"><%= @user.name %></h4>
          <%= link_to "View profile", @user, class: "btn btn-outline-primary btn-sm mb-3" %>
          <%= render "shared/stats" %>
        </div>
      </section>
    </aside>

    <!-- Cột phải: danh sách following/followers -->
    <div class="col-md-8">
      <% if @users.any? %>
        <div class="row g-3">
          <% @users.each do |user| %>
            <div class="col-12 col-sm-6 col-md-6 col-lg-4">
              <div class="card h-100 shadow-sm border-0 text-center p-3 hover-card">
                <%= link_to user do %>
                  <%= gravatar_for user, size: 80, class: "rounded-circle border mb-2" %>
                  <h6 class="fw-semibold text-dark mt-2 mb-0"><%= user.name %></h6>
                <% end %>
              </div>
            </div>
          <% end %>
        </div>

        <div class="mt-4 d-flex justify-content-center">
          <%= pagy_bootstrap_nav(@pagy) if defined?(@pagy) && @pagy.pages > 1 %>
        </div>
      <% else %>
        <p class="text-muted text-center mt-4">No users found.</p>
      <% end %>
    </div>
  </div>
</div>
